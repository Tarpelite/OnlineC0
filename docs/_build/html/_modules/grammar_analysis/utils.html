
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_cn">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>grammar_analysis.utils &#8212; OnlineC0  文档</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>grammar_analysis.utils 源代码</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">.lexer</span> <span class="k">import</span> <span class="n">C0lexer</span>  
<span class="kn">import</span> <span class="nn">os</span>


<div class="viewcode-block" id="special_lexer"><a class="viewcode-back" href="../../grammar_analysis/gramma.html#grammar_analysis.utils.special_lexer">[文档]</a><span class="k">class</span> <span class="nc">special_lexer</span><span class="p">(</span><span class="n">C0lexer</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        词法分析器,是C0lexer的子类</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">INPUT_FILE_NAME</span> <span class="o">=</span> <span class="s1">&#39;web&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;lexer的初始化</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            INPUT_FILE_NAME: 输入文件的路径</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">C0lexer</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">INPUT_FILE_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">INPUT_FILE_NAME</span> <span class="o">=</span> <span class="n">INPUT_FILE_NAME</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">word_cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_message_box</span> <span class="o">=</span> <span class="p">[]</span>
   
<div class="viewcode-block" id="special_lexer._retract"><a class="viewcode-back" href="../../grammar_analysis/gramma.html#grammar_analysis.utils.special_lexer._retract">[文档]</a>    <span class="k">def</span> <span class="nf">_retract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">          回退一个字符</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>
 
<div class="viewcode-block" id="special_lexer._isNewLine"><a class="viewcode-back" href="../../grammar_analysis/gramma.html#grammar_analysis.utils.special_lexer._isNewLine">[文档]</a>    <span class="k">def</span> <span class="nf">_isNewLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">          判断是否是一个新的行</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curChar</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>
    
<div class="viewcode-block" id="special_lexer._error"><a class="viewcode-back" href="../../grammar_analysis/gramma.html#grammar_analysis.utils.special_lexer._error">[文档]</a>    <span class="k">def</span> <span class="nf">_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            增加报错信息</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;词法错误：第&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_cnt</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;行,第&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">word_cnt</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;个单词：&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_message_box</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>
        
    <span class="k">def</span> <span class="nf">getsym</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearToken</span><span class="p">()</span>
        <span class="n">lim</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SOURCE_TEXT</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">&gt;=</span> <span class="n">lim</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">isSpace</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">isTab</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isNewLine</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isNewLine</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line_cnt</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">word_cnt</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clearToken</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">&gt;=</span> <span class="n">lim</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line_cnt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">word_cnt</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLetter</span><span class="p">():</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLetter</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">isDigit</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isKeyWord</span><span class="p">():</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;关键字&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span><span class="o">.</span><span class="n">upper</span><span class="p">()])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;标识符&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isDigit</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;整数&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">isDigit</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;整数&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isMinus</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">])</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isPlus</span><span class="p">():</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;+&#39;</span><span class="p">,</span>  <span class="s1">&#39;+&#39;</span><span class="p">])</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isQuote</span><span class="p">():</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isQuote</span><span class="p">():</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isInvalidchar</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SOURCE_TEXT</span><span class="p">):</span>
                        <span class="k">return</span> <span class="kc">False</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isTrans</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SOURCE_TEXT</span><span class="p">):</span>
                        <span class="k">return</span> <span class="kc">False</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;字符串&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TOKEN</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLess</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEqu</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;关系运算符&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;关系运算符&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isMore</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEqu</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;关系运算符&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;关系运算符&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isMark</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEqu</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;关系运算符&#39;</span><span class="p">,</span> <span class="s1">&#39;!=&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEqu</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEqu</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;关系运算符&quot;</span><span class="p">,</span> <span class="s2">&quot;==&quot;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;专用符号&#39;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isMult</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isDiv</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLpar</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;专用符号&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isRpar</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;专用符号&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isBigLpar</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;专用符号&#39;</span><span class="p">,</span> <span class="s1">&#39;{&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isBigRpar</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;专用符号&#39;</span><span class="p">,</span> <span class="s1">&#39;}&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isComma</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;专用符号&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">isSemi</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
            <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;专用符号&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">word_cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RESULT</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">REPLY</span> <span class="o">+=</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;]</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="special_lexer.error_report"><a class="viewcode-back" href="../../grammar_analysis/gramma.html#grammar_analysis.utils.special_lexer.error_report">[文档]</a>    <span class="k">def</span> <span class="nf">error_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            错误分析报告</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_message_box</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Successfully!&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_message_box</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">+=</span> <span class="n">msg</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="special_lexer.print_result"><a class="viewcode-back" href="../../grammar_analysis/gramma.html#grammar_analysis.utils.special_lexer.print_result">[文档]</a>    <span class="k">def</span> <span class="nf">print_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            打印结果</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">RESULT</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;行：&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; 个: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; 类型: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; 值: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_report</span><span class="p">())</span></div>
    
<div class="viewcode-block" id="special_lexer.output"><a class="viewcode-back" href="../../grammar_analysis/gramma.html#grammar_analysis.utils.special_lexer.output">[文档]</a>    <span class="k">def</span> <span class="nf">output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            输出词法分析结果文件</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RESULT</span><span class="p">)</span>
        <span class="p">(</span><span class="n">_</span> <span class="p">,</span> <span class="n">tempfilename</span><span class="p">)</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">INPUT_FILE_NAME</span><span class="p">)</span>
        <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">tempfilename</span><span class="p">)</span>
        <span class="n">OUTPUT_FILE_NAME</span> <span class="o">=</span> <span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;wout.txt&quot;</span>
        <span class="n">OUTPUT_ERROR_MESSAGE</span> <span class="o">=</span> <span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;error.txt&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">OUTPUT_FILE_NAME</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">length</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">RESULT</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
                    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
                <span class="n">line</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="c1">#   如果有报错</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_message_box</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">OUTPUT_ERROR_MESSAGE</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_message_box</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_message_box</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="norm_C0_compiler"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler">[文档]</a><span class="k">class</span> <span class="nc">norm_C0_compiler</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    C0编译器</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_file_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">words</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#  words 存放词法分析之后的输出</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_p</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#  tab符号表(name:标识符名称</span>
        <span class="c1">#        obj: 标识符种类，可以是常量，变量，函数</span>
        <span class="c1">#        typ: 标识符类型，可以是整型，字符,字符串</span>
        <span class="c1">#        lev: 表示该标识符所在分程序的静态层次</span>
        <span class="c1">#        adr: 变量在运行栈中分配的相对地址,或常量在表中的位置，或者字符对应的ASCII码)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btab</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#   btab分程序表(last:始终指向该分程序中说明的当前（最后）一个标识符在tab中的位置）</span>
        <span class="c1">#           lastpar:指向函数最后一个参数在tab表中的位置</span>
        <span class="c1">#           )</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_p</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#   display分程序表(用于存放和检索btab)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rconst</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rconst_p</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#   rconst实常量表（val：当前实常量的值）</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stab</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#   stab字符串常量表(inum:字符串起始位置，slen:字符串长度)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#   pcode表,存放生成的p_code指令</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_msg_box</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#   存放报错信息</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack_p</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#   运行时栈的指针</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="c1">#   当前运行时的lev</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lev_cnt</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="c1">#   目前的lev总数</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#   记录上一层的计数</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_main</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#   只有从main函数开始才输出Pcode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
        
<div class="viewcode-block" id="norm_C0_compiler._getword"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._getword">[文档]</a>    <span class="k">def</span> <span class="nf">_getword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            返回下一个单词</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">words_p</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">return</span> <span class="kc">False</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler._curword"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._curword">[文档]</a>    <span class="k">def</span> <span class="nf">_curword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            返回当前指针所指的单词</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">words_p</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">False</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler._insert_const"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._insert_const">[文档]</a>    <span class="k">def</span> <span class="nf">_insert_const</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            在rconst中插入常数</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_const</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span> <span class="o">!=</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;常量&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;重复定义&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">record</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rconst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rconst_p</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler._lookup_const"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._lookup_const">[文档]</a>    <span class="k">def</span> <span class="nf">_lookup_const</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            查询rconst表，获取常量对应的值</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rconst</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word_name</span> <span class="o">==</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="s2">&quot;error&quot;</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler._insert_display"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._insert_display">[文档]</a>    <span class="k">def</span> <span class="nf">_insert_display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">lev</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            在display区中插入一条记录</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_variable</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span> <span class="o">!=</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;重复定义&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_const</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span> <span class="o">!=</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;重复定义&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">address</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">addr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_p</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="n">addr</span> <span class="o">=</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_p</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">record</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="n">lev</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="norm_C0_compiler._new_lev"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._new_lev">[文档]</a>    <span class="k">def</span> <span class="nf">_new_lev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pre_lev</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            在display区中插入一个新的lev</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lev_cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lev_cnt</span>
        <span class="n">ret_addr_name</span> <span class="o">=</span> <span class="s2">&quot;ret_addr&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="n">ret_addr_name</span><span class="p">,</span> <span class="s1">&#39;ret_addr&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span><span class="p">,</span> <span class="s1">&#39;abp&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler._lookup_variable"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._lookup_variable">[文档]</a>    <span class="k">def</span> <span class="nf">_lookup_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            在display区查找一个变量</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;error&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ret_addr&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;error&#39;</span>
        <span class="n">siz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">siz</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span> <span class="ow">or</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;error&quot;</span>
                <span class="k">return</span> <span class="n">i</span>
        <span class="k">return</span> <span class="s2">&quot;error&quot;</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        cur_lev = self.cur_lev</span>
<span class="sd">        i = 0</span>
<span class="sd">        for record in self.display:</span>
<span class="sd">            if record[0] == name and record[4] == cur_lev:</span>
<span class="sd">                return i</span>
<span class="sd">            elif record[4] == cur_lev and record[1] == &#39;abp&#39;:</span>
<span class="sd">                res = self._lookup_abp(record[0], name)</span>
<span class="sd">                if res != &quot;error&quot;:</span>
<span class="sd">                    return res</span>
<span class="sd">                else:</span>
<span class="sd">                    i += 1</span>
<span class="sd">            else:</span>
<span class="sd">                i += 1</span>
<span class="sd">        &#39;&#39;&#39;</span></div>
   
<div class="viewcode-block" id="norm_C0_compiler._lookup_abp"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._lookup_abp">[文档]</a>    <span class="k">def</span> <span class="nf">_lookup_abp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            在某一个abp内非递归的查找一个变量</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;abp&#39;</span> <span class="ow">and</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="n">lev</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">i</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="s2">&quot;error&quot;</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler._gen_Pcode"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._gen_Pcode">[文档]</a>    <span class="k">def</span> <span class="nf">_gen_Pcode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            生成一行Pcode</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">line_no</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="n">line_no</span><span class="p">]</span>
        <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">res</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">code</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler._zipper_fill"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._zipper_fill">[文档]</a>    <span class="k">def</span> <span class="nf">_zipper_fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">JPC_id</span><span class="p">,</span> <span class="n">JPC_code</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            拉链回填</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">code_pre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">[:</span><span class="n">JPC_id</span><span class="p">]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="n">JPC_id</span><span class="p">]</span>
        <span class="n">JPC_code</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">JPC_code</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">JPC_code</span><span class="p">)</span>
        <span class="n">JPC_code</span> <span class="o">=</span> <span class="n">res</span>
        <span class="k">if</span> <span class="n">JPC_id</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">code_suf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">[</span><span class="n">JPC_id</span><span class="p">:]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">code_suf</span><span class="p">)):</span>
            <span class="n">code_suf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">code_suf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">code_suf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;JPC&#39;</span><span class="p">:</span>
                <span class="n">code_suf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">code_suf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">code_pre</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">JPC_code</span><span class="p">)</span>
        <span class="n">code_pre</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">code_suf</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code_pre</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.print_Pcode"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.print_Pcode">[文档]</a>    <span class="k">def</span> <span class="nf">print_Pcode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            将Pcode打印成表</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pcode&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">code</span><span class="p">:</span>
                <span class="n">record</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ele</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span>
            <span class="n">record</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.web_output_Pcode_table"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.web_output_Pcode_table">[文档]</a>    <span class="k">def</span> <span class="nf">web_output_Pcode_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            生成H5代码</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">h5</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&lt;tr&gt;&quot;</span>
            <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">code</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;&lt;td&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ele</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/tr&gt;&quot;</span>
            <span class="n">h5</span> <span class="o">+=</span> <span class="n">line</span>
        <span class="k">return</span> <span class="n">h5</span></div>

    
<div class="viewcode-block" id="norm_C0_compiler.print_display"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.print_display">[文档]</a>    <span class="k">def</span> <span class="nf">print_display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            打印变量表</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;变量表&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;name</span><span class="se">\t</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;type</span><span class="se">\t</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;value</span><span class="se">\t</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;addr</span><span class="se">\t</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;lev</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;abp&quot;</span> <span class="ow">or</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;ret_addr&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ele</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.web_output_display_table"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.web_output_display_table">[文档]</a>    <span class="k">def</span> <span class="nf">web_output_display_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            生成H5表格代码</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">h5</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&lt;tr&gt;&quot;</span>
            <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;abp&quot;</span> <span class="ow">or</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ret_addr&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;&lt;td&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ele</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/tr&gt;&quot;</span>
            <span class="n">h5</span> <span class="o">+=</span> <span class="n">line</span>
        <span class="k">return</span> <span class="n">h5</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.print_rconst"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.print_rconst">[文档]</a>    <span class="k">def</span> <span class="nf">print_rconst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            打印常量表</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;常量表&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;name</span><span class="se">\t</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;value</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rconst</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ele</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.web_output_rconst_table"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.web_output_rconst_table">[文档]</a>    <span class="k">def</span> <span class="nf">web_output_rconst_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            生成H5代码</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">h5</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rconst</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&lt;tr&gt;&quot;</span>
            <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;&lt;td&gt;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ele</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/tr&gt;&quot;</span>
            <span class="n">h5</span> <span class="o">+=</span> <span class="n">line</span>
        <span class="k">return</span> <span class="n">h5</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.print_error"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.print_error">[文档]</a>    <span class="k">def</span> <span class="nf">print_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            打印报错信息</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;错误信息&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_msg_box</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.web_output_error_table"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.web_output_error_table">[文档]</a>    <span class="k">def</span> <span class="nf">web_output_error_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            生成H5代码</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">h5</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_msg_box</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&lt;tr class=</span><span class="se">\&quot;</span><span class="s2">danger</span><span class="se">\&quot;</span><span class="s2"> &gt;&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;&lt;td&gt;&quot;</span> <span class="o">+</span> <span class="n">record</span> <span class="o">+</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/tr&gt;&quot;</span>
            <span class="n">h5</span> <span class="o">+=</span> <span class="n">line</span>
        <span class="k">return</span> <span class="n">h5</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.report_result"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.report_result">[文档]</a>    <span class="k">def</span> <span class="nf">report_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            打印编译结果</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_msg_box</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_error</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_display</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_rconst</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_Pcode</span><span class="p">()</span></div>

        
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_file_name</span> <span class="o">=</span> <span class="n">file_name</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    
<div class="viewcode-block" id="norm_C0_compiler.parantheis_matching"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.parantheis_matching">[文档]</a>    <span class="k">def</span> <span class="nf">parantheis_matching</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            错误局部化处理之一——括号匹配</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">siz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">siz</span><span class="p">)]</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">siz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
                <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cnt</span>
            <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
                <span class="n">left_par</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cnt</span>
                <span class="n">cnt</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">cnt</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">left_par</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">error_msg_box</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;第&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;行&#39;)&#39;无匹配&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;{&#39;</span><span class="p">:</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
                <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cnt</span>
            <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;}&#39;</span><span class="p">:</span>
                <span class="n">left_par</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cnt</span>
                <span class="n">cnt</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">cnt</span> <span class="o">&lt;</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">left_par</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;{&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">error_msg_box</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;第&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;行’}‘无匹配&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cnt</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="norm_C0_compiler._error"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler._error">[文档]</a>    <span class="k">def</span> <span class="nf">_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hint</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            添加报错信息</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;line: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">wd</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">+</span> <span class="n">hint</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">error_msg_box</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">words_p</span><span class="p">]</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span><span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">bitmap</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">words_p</span><span class="p">]</span> <span class="o">==</span> <span class="n">cnt</span><span class="p">:</span>
            <span class="k">if</span><span class="p">(</span><span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;;&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ELSE&#39;</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span> </div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_read"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_read">[文档]</a>    <span class="k">def</span> <span class="nf">s_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            &lt;读语句&gt; -&gt; scanf&#39;(&#39;&lt;标识符&gt;&#39;)&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s1">&#39;应为(&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s1">&#39;应为标识符&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_variable</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;未定义&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">addr</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">lev</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDA&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">addr</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;RED&quot;</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s1">&#39;应为)&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_write"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_write">[文档]</a>    <span class="k">def</span> <span class="nf">s_write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">          ＜写语句＞ ::=  printf‘(’[&lt;字符串&gt;,][＜expression ＞]‘）’</span>
<span class="sd">　　　　　 当出现字符串时，就加印字符串, 之后打印表达式的值；</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s1">&#39;应为(&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;字符串&#39;</span><span class="p">:</span>
            <span class="c1">#   由于Pcode没有具体处理字符串的方法，所以增添LDS指令</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;str&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_variable</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">lev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDS&quot;</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;WRS&quot;</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_expression</span><span class="p">()</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;WRW&quot;</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span><span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s1">&#39;应为)&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>
   
<div class="viewcode-block" id="norm_C0_compiler.s_return"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_return">[文档]</a>    <span class="k">def</span> <span class="nf">s_return</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜返回语句＞ ::=  return [ ‘(’＜表达式＞’)’ ] </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1">#   find return address</span>
        <span class="n">record</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">siz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">siz</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">record</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ret_addr&#39;</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        for word in self.display:</span>
<span class="sd">            if word[0] == &#39;ret_addr&#39; and word[4] == self.cur_lev:</span>
<span class="sd">                record = word</span>
<span class="sd">                break</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">addr</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">lev</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;LDA&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">addr</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;+&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;整数&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s1">&#39;应为表达式&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#   有返回值，调用的时函数，将返回值写入对应地址，并且输出EXF</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_expression</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;STO&quot;</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EXF&quot;</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s1">&#39;应为)&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#   如果没有返回值，则是调用的一个过程，因而输出EXP指令</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EXP&quot;</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="c1">#   切换display到上一层</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;DIS&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">siz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">siz</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ret_addr&#39;</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">break</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        for word in self.display:</span>
<span class="sd">            lev = word[4]</span>
<span class="sd">            name = word[0]</span>
<span class="sd">            if lev == self.cur_lev and name == &#39;ret_addr&#39;:</span>
<span class="sd">                i = word[3] + 1</span>
<span class="sd">                break</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">pre_lev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span> <span class="o">=</span> <span class="n">pre_lev</span>
        <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="c1">#   最外层特殊处理</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#   其他情况查询display区中的pre_lev然后回填</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">:</span>
                <span class="n">lev</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">lev</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ret_addr&#39;</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">pre_lev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span> <span class="o">=</span> <span class="n">pre_lev</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_statement_series"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_statement_series">[文档]</a>    <span class="k">def</span> <span class="nf">s_statement_series</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜语句序列＞ ::=  ＜语句＞｛＜语句＞｝ </span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_statement</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="p">(</span><span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;IF&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;WHILE&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;RETURN&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;SCANF&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PRINTF&#39;</span><span class="p">))</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_statement</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_value_param_list"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_value_param_list">[文档]</a>    <span class="k">def</span> <span class="nf">s_value_param_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">display_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜值参数表＞ ::=  ＜表达式＞｛，＜表达式＞｝｜＜空＞</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">display_index</span><span class="p">]</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">base_addr</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">display_index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">lev</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">base_addr</span><span class="o">+</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;int&#39;</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">base_addr</span> <span class="o">+=</span> <span class="n">i</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDA&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">base_addr</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="n">wd0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_expression</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="n">wd0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;STO&quot;</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">base_addr</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">cnt</span> <span class="o">&lt;</span> <span class="n">val</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDA&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">base_addr</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">cnt</span> <span class="o">&gt;</span> <span class="n">val</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;参数个数不符&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;+&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;整数&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为表达式&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_expression</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;STO&quot;</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
                <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">base_addr</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">cnt</span> <span class="o">&lt;</span> <span class="n">val</span><span class="p">:</span>
                    <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDA&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">base_addr</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">cnt</span> <span class="o">&gt;</span> <span class="n">val</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;参数个数不符&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_function_call_statement"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_function_call_statement">[文档]</a>    <span class="k">def</span> <span class="nf">s_function_call_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">           ＜函数调用语句＞ ::=  ＜标识符＞‘（’＜值参数表＞‘）’ </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1">#   在符号表找到对应的函数</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_variable</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;未定义&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;error&#39;</span>
        <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="o">!=</span> <span class="s1">&#39;func&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;不是可调用的类型&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;error&#39;</span>
        <span class="c1">#   调用之前先压栈</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;MKS&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="c1">#   先准备参数</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为(&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;error&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_value_param_list</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;error&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;error&#39;</span>
        <span class="c1">#   然后调用函数</span>
        <span class="n">addr</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;CAL&quot;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">addr</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">name</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_while_statement"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_while_statement">[文档]</a>    <span class="k">def</span> <span class="nf">s_while_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">           ＜循环语句＞ ::=  while‘（’＜条件＞‘）’＜语句＞ </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">jmp_back_code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;JMP&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为（&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;+&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;整数&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为表达式&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_condition</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">JPC_id</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">JPC_code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;JPC&quot;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_statement</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">jmp_back_code</span><span class="p">)</span>
        <span class="n">target</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">JPC_code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;JPC&quot;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">target</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zipper_fill</span><span class="p">(</span><span class="n">JPC_id</span><span class="p">,</span> <span class="n">JPC_code</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_condition"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_condition">[文档]</a>    <span class="k">def</span> <span class="nf">s_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">           ＜条件＞ ::=  ＜表达式＞＜关系运算符＞＜表达式＞｜＜表达式＞ </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;+&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;整数&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为表达式&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_expression</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;关系运算符&#39;</span><span class="p">:</span>
            <span class="c1">#   如果只有一个表达式，判断表达式结果是否为0</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDC&quot;</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EQL&quot;</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">operator</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;==&quot;</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EQL&quot;</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;!=&quot;</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NEQ&quot;</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LSS&quot;</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LER&quot;</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;GRT&quot;</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;GEQ&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;+&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;整数&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_expression</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_condition_statement"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_condition_statement">[文档]</a>    <span class="k">def</span> <span class="nf">s_condition_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">           ＜条件语句＞ ::=  if‘（’＜条件＞‘）’＜语句＞〔else＜语句＞〕 </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为(&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_condition</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">JPC_id</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">JPC_code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;JPC&quot;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_statement</span><span class="p">()</span>
        <span class="n">JMP_id</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">JMP_code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;JMP&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ELSE&#39;</span><span class="p">:</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="c1">#   拉链回填</span>
            <span class="n">target</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
            <span class="n">JPC_code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;JPC&quot;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">target</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zipper_fill</span><span class="p">(</span><span class="n">JPC_id</span><span class="p">,</span> <span class="n">JPC_code</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_statement</span><span class="p">()</span>
            <span class="n">target</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
            <span class="n">JMP_code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;JMP&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">target</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zipper_fill</span><span class="p">(</span><span class="n">JMP_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">JMP_code</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">target</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
            <span class="n">JPC_code</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">target</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zipper_fill</span><span class="p">(</span><span class="n">JPC_id</span><span class="p">,</span> <span class="n">JPC_code</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_assignment_statement"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_assignment_statement">[文档]</a>    <span class="k">def</span> <span class="nf">s_assignment_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜赋值语句＞ ::=  ＜标识符＞＝＜表达式＞</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为标识符&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_variable</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;未定义&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">typ</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="o">!=</span> <span class="s1">&#39;int&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;应是int类型，但却是&quot;</span> <span class="o">+</span> <span class="n">typ</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">addr</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">lev</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDA&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">addr</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;=&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为=&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_expression</span><span class="p">()</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;STO&quot;</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_statement"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_statement">[文档]</a>    <span class="k">def</span> <span class="nf">s_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        ＜语句＞ ::= ＜条件语句＞｜＜循环语句＞｜‘{’&lt;语句序列&gt;‘}’｜＜函数调用语句＞;</span>
<span class="sd">｜＜赋值语句＞; | &lt;返回语句&gt;;｜＜读语句＞;｜＜写语句＞;｜＜空＞</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;IF&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_condition_statement</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;WHILE&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_while_statement</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;{&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_statement_series</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;}&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为}&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;RETURN&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_return</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;缺少;&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;SCANF&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_read</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;缺少;&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;PRINTF&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_write</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;缺少;&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_function_call_statement</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;缺少;&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;=&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_assignment_statement</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;缺少;&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_factor"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_factor">[文档]</a>    <span class="k">def</span> <span class="nf">s_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜因子＞ ::=  ＜标识符＞｜‘（’＜表达式＞‘）’｜＜整数＞｜＜函数调用语句＞</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_expression</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为)&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;整数&#39;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDC&quot;</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_function_call_statement</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">res</span>
                <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_variable</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;未定义&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">i</span><span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">lev</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">lev</span>
                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LOD&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words</span><span class="p">[</span><span class="n">p0</span><span class="p">]</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_const</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rconst</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDC&quot;</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_variable</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;未定义&quot;</span><span class="p">)</span>
                        <span class="k">return</span> <span class="kc">False</span>
                    <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">addr</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                    <span class="n">lev</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                    <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LOD&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">lev</span><span class="p">,</span> <span class="n">addr</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为标识符或（或整数&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_item"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_item">[文档]</a>    <span class="k">def</span> <span class="nf">s_item</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜项＞ ::=  ＜因子＞{＜乘法运算符＞＜因子＞}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_factor</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_factor</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;MUL&quot;</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;DIV&quot;</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_expression"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_expression">[文档]</a>    <span class="k">def</span> <span class="nf">s_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜表达式＞ ::=  〔＋｜－〕＜项＞｛＜加法运算符＞＜项＞｝</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">operator_global</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
                <span class="n">operator_global</span> <span class="o">=</span> <span class="s2">&quot;ADD&quot;</span>
            <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;-&quot;</span><span class="p">:</span>
                <span class="n">operator_global</span> <span class="o">=</span> <span class="s2">&quot;SUB&quot;</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LDC&quot;</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_item</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_item</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ADD&quot;</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SUB&quot;</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">operator_global</span> <span class="o">==</span> <span class="s2">&quot;ADD&quot;</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ADD&quot;</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">operator_global</span> <span class="o">==</span> <span class="s1">&#39;SUB&#39;</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SUB&quot;</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_main_function"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_main_function">[文档]</a>    <span class="k">def</span> <span class="nf">s_main_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜主函数＞ ::=  ( void ｜int ) main ＜参数＞＜复合语句＞</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;关键字&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为void或int&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;VOID&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为void或int&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;MAIN&#39;</span><span class="p">:</span>
            <span class="c1">#self._error(&quot;应为main&quot;)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;main:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="n">pre_lev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span>
        <span class="n">cur_lev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_lev</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_param</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_compound_statement</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span> <span class="o">=</span> <span class="n">cur_lev</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span> <span class="o">=</span> <span class="n">pre_lev</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_param_list"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_param_list">[文档]</a>    <span class="k">def</span> <span class="nf">s_param_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜参数表＞ ::=  int ＜标识符＞｛，int ＜标识符＞} | 空</span>
<span class="sd">                  //参数表可以为空</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;缺少参数声明&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">while</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;逗号后还需要继续输入参数&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为标识符&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">cnt</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">cnt</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_param"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_param">[文档]</a>    <span class="k">def</span> <span class="nf">s_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜参数＞ ::=  ‘(’＜参数表＞‘)’</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为(&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_param_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">res</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_compound_statement"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_compound_statement">[文档]</a>    <span class="k">def</span> <span class="nf">s_compound_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜复合语句＞ ::=  ‘{’〔＜常量说明部分＞〕〔＜变量说明部分＞〕＜语句序列＞‘}’</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;{&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为{&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;CONST&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_constant_description</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_variable_description</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_statement_series</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;}&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_function_declaration"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_function_declaration">[文档]</a>    <span class="k">def</span> <span class="nf">s_function_declaration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜函数定义部分＞ ::=  （＜声明头部＞｜void ＜标识符＞）＜参数＞＜复合语句＞</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VOID&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
                <span class="c1">#self._error(&quot;应为标识符&quot;)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="n">addr</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;func&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;MAIN&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为标识符&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="n">addr</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;func&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">addr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span>
            <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gen_Pcode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_lev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_lev</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_param</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_variable</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_compound_statement</span><span class="p">()</span>
        <span class="c1">#self.cur_lev = self.pre_lev</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_variable_description"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_variable_description">[文档]</a>    <span class="k">def</span> <span class="nf">s_variable_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜变量说明部分＞ ::=  ＜声明头部＞｛，＜标识符＞｝；</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_declaration_head</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为标识符&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;缺少;&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_declaration_head"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_declaration_head">[文档]</a>    <span class="k">def</span> <span class="nf">s_declaration_head</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">           ＜声明头部＞ ::=  int　＜标识符＞  </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为INT&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为标识符&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_insert_display</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_lev</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="norm_C0_compiler.s_const_definition"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_const_definition">[文档]</a>    <span class="k">def</span> <span class="nf">s_const_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜常量定义＞  ::=  ＜标识符＞＝＜整数＞</span>
<span class="sd">        &#39;&#39;&#39;</span> 
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为标识符&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;=&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s1">&#39;应为=&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;整数&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为整数&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_insert_const</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="norm_C0_compiler.s_constant_description"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_constant_description">[文档]</a>    <span class="k">def</span> <span class="nf">s_constant_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜常量说明部分＞  ::=  const ＜常量定义＞｛,＜常量定义＞};</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;CONST&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;应为const&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_const_definition</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_const_definition</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;专用符号&#39;</span> <span class="ow">or</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="s2">&quot;缺少;&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="norm_C0_compiler.s_program"><a class="viewcode-back" href="../../grammar_analysis/compiler.html#grammar_analysis.utils.norm_C0_compiler.s_program">[文档]</a>    <span class="k">def</span> <span class="nf">s_program</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            ＜程序＞ ::=  〔＜常量说明部分＞〕〔＜变量说明部分＞〕｛＜函数定义部分＞｝＜主函数＞</span>
<span class="sd">        &#39;&#39;&#39;</span> 
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;CONST&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_constant_description</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;INT&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;标识符&#39;</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getword</span><span class="p">()</span>
                <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;专用符号&quot;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
                    <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_function_declaration</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
                        <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
                    <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_variable_description</span><span class="p">()</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">wd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;关键字&#39;</span> <span class="ow">and</span> <span class="n">wd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VOID&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words</span>
            <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_function_declaration</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">flag</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_function_declaration</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">words_p</span> <span class="o">=</span> <span class="n">p0</span>
        <span class="n">wd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curword</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_main_function</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Grammar analysis successfully!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div></div>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1">#  debugging and test_case</span>
    
    <span class="n">FILE_NAME</span> <span class="o">=</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">编译课程设计</span><span class="se">\\</span><span class="s2">OnlineC0</span><span class="se">\\</span><span class="s2">test</span><span class="se">\\</span><span class="s2">C0</span><span class="se">\\</span><span class="s2">C0_TEST1.txt&quot;</span>
    <span class="n">lexer</span> <span class="o">=</span> <span class="n">special_lexer</span><span class="p">(</span><span class="n">FILE_NAME</span><span class="p">)</span>
    <span class="n">lexer</span><span class="o">.</span><span class="n">word_analyze</span><span class="p">()</span>
    <span class="c1">#lexer.print_result()</span>
    <span class="n">lexer</span><span class="o">.</span><span class="n">output</span><span class="p">()</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="n">lexer</span><span class="o">.</span><span class="n">error_message_box</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">lexer</span><span class="o">.</span><span class="n">RESULT</span>

    <span class="n">input_file_name</span> <span class="o">=</span> <span class="s2">&quot;/home/tarpe/shared/OnlineC0/test5wout.txt&quot;</span>
    <span class="n">compiler</span> <span class="o">=</span> <span class="n">norm_C0_compiler</span><span class="p">()</span>
    <span class="n">compiler</span><span class="o">.</span><span class="n">error_msg_box</span> <span class="o">=</span> <span class="n">errors</span>
    <span class="c1">#compiler.read(input_file_name)</span>
    <span class="n">compiler</span><span class="o">.</span><span class="n">words</span> <span class="o">=</span> <span class="n">words</span>
    <span class="c1">#print(compiler.words)</span>
    <span class="n">compiler</span><span class="o">.</span><span class="n">s_program</span><span class="p">()</span>
    <span class="n">compiler</span><span class="o">.</span><span class="n">report_result</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">模块代码</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="搜" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Tarpelite.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>